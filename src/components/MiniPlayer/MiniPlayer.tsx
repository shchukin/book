import './MiniPlayer.css'
import {useRef} from 'react';

type MiniPlayerProps = {
  src: string;
};

const MiniPlayer: React.FC<MiniPlayerProps> = ({src}) => {
  const audioRef = useRef<HTMLAudioElement | null>(null);

  const handlePlay = () => {
    if (audioRef.current) {
      audioRef.current.play();
    }
  };

  return (
    <>
      <button className="mini-player" onClick={handlePlay}>
        <svg className="mini-player__icon" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M20.1327 6.01258C21.8798 7.42685 23 9.58441 23 11.9991C23 14.4138 21.8798 16.5714 20.1327 17.9856C19.7162 18.3231 19.1055 18.2589 18.7658 17.845C18.4261 17.4312 18.4908 16.8245 18.9074 16.487C20.2217 15.4263 21.0588 13.8111 21.0588 11.9991C21.0588 10.1871 20.2217 8.57193 18.9074 7.50721C18.4908 7.16971 18.4301 6.56302 18.7658 6.14919C19.1015 5.73536 19.7162 5.67509 20.1327 6.00857V6.01258ZM17.686 9.00585C18.5555 9.71298 19.1176 10.7898 19.1176 11.9991C19.1176 13.2085 18.5555 14.2852 17.686 14.9924C17.2695 15.3299 16.6588 15.2656 16.3191 14.8518C15.9794 14.4379 16.0441 13.8312 16.4607 13.4937C16.8974 13.1402 17.1765 12.6018 17.1765 11.9991C17.1765 11.3964 16.8974 10.8581 16.4607 10.5005C16.0441 10.163 15.9835 9.55629 16.3191 9.14245C16.6548 8.72862 17.2695 8.66835 17.686 9.00183V9.00585ZM13.1768 3.11173C13.6419 3.32066 13.9412 3.77869 13.9412 4.28493V19.7133C13.9412 20.2195 13.6419 20.6776 13.1768 20.8865C12.7118 21.0954 12.1658 21.011 11.7857 20.6736L6.33015 15.8562H3.58824C2.16066 15.8562 1 14.7031 1 13.2848V10.7134C1 9.29513 2.16066 8.14202 3.58824 8.14202H6.33015L11.7857 3.32467C12.1658 2.98718 12.7118 2.90682 13.1768 3.11173Z"/>
        </svg>
      </button>
      <audio ref={audioRef} src={src} preload="auto"></audio>
    </>
  );
};

export default MiniPlayer;
